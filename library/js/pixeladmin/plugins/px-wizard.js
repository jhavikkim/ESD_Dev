var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_slicedToArray=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,s=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){s=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(s)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var PxWizard=function(o){"use strict";var t="pxWizard",h="px.wizard",e="."+h,i=o.fn[t],n={minStepWidth:200},s="wizard-wrapper",r="wizard-steps",l="wizard-pane",u="frozen",f="finished",v="active",c="completed",p={RESIZE:"resize"+e,CLICK:"click"+e,CHANGE:"stepchange"+e,CHANGED:"stepchanged"+e,FINISH:"finish"+e,FINISHED:"finished"+e,FROZEN:"frozen"+e,UNFROZEN:"unfrozen"+e,RESETED:"reseted"+e,DESTROY:"destroy"+e},a=function(){function a(t,e){_classCallCheck(this,a),this.uniqueId=pxUtil.generateUniqueId(),this.element=t,this.steps=o(t).find("."+r)[0],this.stepItems=o(this.steps).find("li"),this.wrapper=o(t).find("."+s)[0],this.config=this._getConfig(e),this.activeStep=null,this._isRtl="rtl"===o("html").attr("dir"),this._resetStepsWidth(),this.resizeStepItems(),this.goTo(this.getActiveStepIndex()),this._setListeners()}return _createClass(a,[{key:"resizeStepItems",value:function(){for(var t=this.stepItems.length,e=o(this.wrapper).width(),i=this.config.minStepWidth*t<e?Math.floor(e/t):this.config.minStepWidth,n=0;n<t;n++)this._setStrictWidth(this.stepItems[n],i);null!==this.activeStep&&this._placeStepsContainer()}},{key:"getActiveStepIndex",value:function(){var t=this.activeStep||o(this.steps).find("li."+v)[0];return t?this._getStepIndex(t):0}},{key:"getStepCount",value:function(){return this.stepItems.length}},{key:"goTo",value:function(t){if(!this.isFrozen()&&!this.isFinished()){var e,i,n,s=this._getStepItemAndTarget(t),r=_slicedToArray(s,3);i=r[0],e=r[1],n=r[2];var a=this.activeStep?this._getStepIndex(this.activeStep):null;if(null===a||i!==a){if(null!==a)if(!this._triggerPreventableEvent("CHANGE",this.element,{activeStepIndex:a,nextStepIndex:i}))return;this.activeStep=e,this._activateStepItem(e,i),this._activateStepPane(n),null!==a&&this._triggerEvent("CHANGED",this.element,{prevStepIndex:a,activeStepIndex:i})}}}},{key:"getPaneByIndex",value:function(t){var e,i=this._getStepItemAndTarget(t),n=_slicedToArray(i,3);return n[0],n[1],e=n[2],o(e)}},{key:"getActivePane",value:function(){return this.getPaneByIndex(this.getActiveStepIndex())}},{key:"goNext",value:function(){if(!this.isFrozen()&&!this.isFinished()){var t=this._getStepIndex(this.activeStep)+1;if(t>=this.stepItems.length)return this.finish();this.goTo(t)}}},{key:"goPrev",value:function(){if(!this.isFrozen()&&!this.isFinished()){var t=this._getStepIndex(this.activeStep)-1;t<0||this.goTo(t)}}},{key:"finish",value:function(){if(!this.isFrozen()&&!this.isFinished()&&this._triggerPreventableEvent("FINISH",this.element)){var t=this._getStepIndex(this.activeStep),e=this.stepItems.length-1;t!==e&&this.goTo(e),pxUtil.addClass(this.element,f),this.freeze(),this._triggerEvent("FINISHED",this.element)}}},{key:"isFinished",value:function(){return pxUtil.hasClass(this.element,f)}},{key:"freeze",value:function(){pxUtil.addClass(this.element,u),this._triggerEvent("FROZEN",this.element)}},{key:"unfreeze",value:function(){this.isFinished()||(pxUtil.removeClass(this.element,u),this._triggerEvent("UNFROZEN",this.element))}},{key:"isFrozen",value:function(){return pxUtil.hasClass(this.element,u)}},{key:"reset",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];pxUtil.removeClass(this.element,u),pxUtil.removeClass(this.element,f),t&&this.goTo(0),this._triggerEvent("RESETED",this.element)}},{key:"destroy",value:function(){this._triggerPreventableEvent("DESTROY",this.element)&&(this._unsetListeners(),o(this.element).removeData(h))}},{key:"_resetStepsWidth",value:function(){this.steps.style.width="auto"}},{key:"_setStrictWidth",value:function(t,e){t.style.minWidth=e+"px",t.style.maxWidth=e+"px",t.style.width=e+"px"}},{key:"_getStepItemAndTarget",value:function(t){var e=void 0,i=void 0;if("number"==typeof t){if(i=t,!(e=this.stepItems[t]))throw new Error('Step item with index "'+t+'" is not found.')}else e=t[0]||t,i=this._getStepIndex(e);var n=e.getAttribute("data-target");if(!n)throw new Error('The step item has invalid "data-target" attribute.');return[i,e,n]}},{key:"_activateStepItem",value:function(t,e){pxUtil.addClass(t,v),pxUtil.removeClass(t,c);for(var i=0;i<e;i++)pxUtil.addClass(this.stepItems[i],c),pxUtil.removeClass(this.stepItems[i],v);for(var n=e+1,s=this.stepItems.length;n<s;n++)pxUtil.removeClass(this.stepItems[n],v),pxUtil.removeClass(this.stepItems[n],c);this._placeStepsContainer()}},{key:"_activateStepPane",value:function(t){for(var e=o(this.element).find("."+l+"."+v),i=0,n=e.length;i<n;i++)pxUtil.removeClass(e[i],v);pxUtil.addClass(o(this.element).find(t)[0],v)}},{key:"_placeStepsContainer",value:function(){var t=o(this.wrapper).width(),e=o(this.steps).width(),i=o(this.activeStep).outerWidth(),n=Math.floor((t-i)/2),s=o(this.activeStep).position().left,r=void 0;this._isRtl&&(s=e-s-i),t<e&&n<s?e+(r=-1*s+n)<t&&(r=-1*e+t):r=0,this.steps.style[this._isRtl?"right":"left"]=r+"px"}},{key:"_getStepIndex",value:function(t){for(var e=void 0,i=0,n=this.stepItems.length;i<n;i++)if(t===this.stepItems[i]){e=i;break}if(void 0===e)throw new Error("Cannot find step item index.");return e}},{key:"_setListeners",value:function(){var e=this;o(window).on(this.constructor.Event.RESIZE+"."+this.uniqueId,o.proxy(this.resizeStepItems,this)),o(this.steps).on(this.constructor.Event.CLICK,"> li",function(){pxUtil.hasClass(this,c)&&e.goTo(this)}),o(this.element).on(this.constructor.Event.CLICK,"[data-wizard-action]",function(){var t=this.getAttribute("data-wizard-action");if("next"===t)return e.goNext();if("prev"===t)return e.goPrev();if("finish"===t)return e.finish();throw new Error('Action "'+t+'" is not found.')})}},{key:"_unsetListeners",value:function(){o(window).off(this.constructor.Event.RESIZE+"."+this.uniqueId),o(this.element).off(e),o(this.steps).off(e)}},{key:"_triggerEvent",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};o(this.element).trigger(o.Event(this.constructor.Event[t],{target:e}),[i])}},{key:"_triggerPreventableEvent",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=o.Event(this.constructor.Event[t],{target:e});return o(this.element).trigger(n,[i]),!n.isDefaultPrevented()}},{key:"_getConfig",value:function(t){return o.extend({},this.constructor.Default,o(this.element).data(),t)}}],[{key:"_jQueryInterface",value:function(i){for(var t=arguments.length,n=Array(1<t?t-1:0),e=1;e<t;e++)n[e-1]=arguments[e];var s=void 0,r=this.each(function(){var t=o(this).data(h),e="object"===(void 0===i?"undefined":_typeof(i))?i:null;if(t||(t=new a(this,e),o(this).data(h,t)),"string"==typeof i){if(!t[i])throw new Error('No method named "'+i+'".');s=t[i].apply(t,n)}});return void 0!==s?s:r}},{key:"Default",get:function(){return n}},{key:"NAME",get:function(){return t}},{key:"DATA_KEY",get:function(){return h}},{key:"Event",get:function(){return p}},{key:"EVENT_KEY",get:function(){return e}}]),a}();return o.fn[t]=a._jQueryInterface,o.fn[t].Constructor=a,o.fn[t].noConflict=function(){return o.fn[t]=i,a._jQueryInterface},a}(jQuery);