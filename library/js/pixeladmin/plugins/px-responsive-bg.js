var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var PxResponsiveBg=function(s){"use strict";var e="pxResponsiveBg",a="px.responsiveBg",t="."+a,n=s.fn[e],i={backgroundImage:null,backgroundPosition:"center middle",overlay:!1,overlayOpacity:.2},o="px-responsive-bg-container",c="px-responsive-bg",u="px-responsive-bg-overlay",l={RESIZE:"resize"+t},r=function(){function r(e,t){var n=this;_classCallCheck(this,r),this.uniqueId=pxUtil.generateUniqueId(),this.element=e,this.config=this._getConfig(t),null!==this.config.backgroundImage&&this._loadImage(this.config.backgroundImage,function(e){n._sizeRatio=e.height/e.width,n._setupMarkup(e),n._setListeners(),n.update()})}return _createClass(r,[{key:"update",value:function(){var e=this.image.parentNode,t=s(e).height(),n=s(e).width(),i=void 0,o=void 0,r=void 0,a=void 0;n*this._sizeRatio>t?(o="100%",i=Math.ceil(n*this._sizeRatio),a=0,r="top"===this.config.backgroundPosition[1]?0:"bottom"===this.config.backgroundPosition[1]?-1*(i-t):Math.floor(-1*(i-t)/2)):(o=Math.ceil(t/this._sizeRatio),i=t,r=0,a="left"===this.config.backgroundPosition[0]?0:"right"===this.config.backgroundPosition[0]?-1*(o-n):Math.floor(-1*(o-n)/2)),this.image.style.width="100%"===o?o:o+"px",this.image.style.height=i+"px",this.image.style.top=r+"px",this.image.style.left=a+"px"}},{key:"destroy",value:function(e){this._unsetListeners(),e&&s(this.element).removeClass(o).find("> ."+c).remove(),s(this.element).removeData(a)}},{key:"_loadImage",value:function(e,t){var n=new Image;n.onload=function(){return t(n)},n.src=e}},{key:"_setupMarkup",value:function(e){pxUtil.addClass(this.element,o);var t=s(this.element).find("> ."+c);if(t.length||(t=s('<div class="'+c+'"></div>').appendTo(this.element)).append('<img alt="">'),this.image=t.find("> img")[0],!this.image)throw new Error("Background <img> element not found!");s(this.image).attr("src",e.src),!1!==this.config.overlay?(t.find("."+u).remove(),t.prepend("string"==typeof this.config.overlay&&"<"===this.config.overlay[0]?s(this.config.overlay).addClass(u).css("opacity",this.config.overlayOpacity):s('<div class="'+u+'"></div>').css({background:"boolean"==typeof this.config.overlay?"#000":this.config.overlay,opacity:this.config.overlayOpacity}))):t.find("> ."+u).remove()}},{key:"_setListeners",value:function(){s(window).on(this.constructor.Event.RESIZE+"."+this.uniqueId,s.proxy(this.update,this))}},{key:"_unsetListeners",value:function(){s(window).off(this.constructor.Event.RESIZE+"."+this.uniqueId)}},{key:"_getConfig",value:function(e){var t=s.extend({},this.constructor.Default,s(this.element).data(),e);if(!t.backgroundImage&&null!==t.backgroundImage)throw new Error("Background image is not specified.");var n=String(t.backgroundPosition).split(" ").slice(0,2);return"center"!==n[0]&&"left"!==n[0]&&"right"!==n[0]&&(n[0]="center"),"middle"!==n[1]&&"top"!==n[1]&&"bottom"!==n[1]&&(n[1]="middle"),t.backgroundPosition=n,t}}],[{key:"_jQueryInterface",value:function(i){for(var e=arguments.length,o=Array(1<e?e-1:0),t=1;t<e;t++)o[t-1]=arguments[t];return this.each(function(){var e=s(this).data(a),t="object"===(void 0===i?"undefined":_typeof(i))?i:null;if(e||"destroy"===i||(e=new r(this,t),s(this).data(a,e)),e&&"string"==typeof i){var n;if(!e[i])throw new Error('No method named "'+i+'"');(n=e)[i].apply(n,o)}})}},{key:"Default",get:function(){return i}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return a}},{key:"Event",get:function(){return l}},{key:"EVENT_KEY",get:function(){return t}}]),r}();return s.fn[e]=r._jQueryInterface,s.fn[e].Constructor=r,s.fn[e].noConflict=function(){return s.fn[e]=n,r._jQueryInterface},r}(jQuery);