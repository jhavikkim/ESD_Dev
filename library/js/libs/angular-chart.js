!function(t){"use strict";if("object"==typeof exports)module.exports=t("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js"));else if("function"==typeof define&&define.amd)define(["angular","chart"],t);else{if("undefined"==typeof angular)throw new Error("AngularJS framework needs to be included, see https://angularjs.org/");if("undefined"==typeof Chart)throw new Error("Chart.js library needs to be included, see http://jtblin.github.io/angular-chart.js/");t(angular,Chart)}}(function(G,H){"use strict";H.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",H.defaults.global.tooltips.mode="label",H.defaults.global.elements.line.borderWidth=2,H.defaults.global.elements.rectangle.borderWidth=2,H.defaults.global.legend.display=!1,H.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var u="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return u&&(H.defaults.global.animation=!1),G.module("chart.js",[]).provider("ChartJs",function(){var e={responsive:!0},a={Chart:H,getOptions:function(t){var r=t&&e[t]||{};return G.extend({},e,r)}};this.setOptions=function(t,r){r?e[t]=G.merge(e[t]||{},r):(r=t,e=G.merge(e,r)),G.merge(a.Chart.defaults,e)},this.$get=function(){return a}}).factory("ChartJsFactory",["ChartJs","$timeout",function($,k){return function(o){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?"},link:function(a,n){function t(t,r){if(!i(t)&&!G.equals(t,r)){var e=o||a.chartType;e&&F(e,a,n)}}u&&window.G_vmlCanvasManager.initElement(n[0]),a.$watch("chartData",function(t,r){if(!t||!t.length||Array.isArray(t[0])&&!t[0].length)return void O(a);var e=o||a.chartType;if(!e)return;if(a.chart&&function(t,e){if(t&&e&&t.length&&e.length)return Array.isArray(t[0])?t.length===e.length&&t.every(function(t,r){return t.length===e[r].length}):0<e.reduce(c,0)&&t.length===e.length;return!1}(t,r))return function(e,t){Array.isArray(t.chartData[0])?t.chart.data.datasets.forEach(function(t,r){t.data=e[r]}):t.chart.data.datasets[0].data=e;t.chart.update(),t.$emit("chart-update",t.chart)}(t,a);F(e,a,n)},!0),a.$watch("chartSeries",t,!0),a.$watch("chartLabels",t,!0),a.$watch("chartOptions",t,!0),a.$watch("chartColors",t,!0),a.$watch("chartDatasetOverride",t,!0),a.$watch("chartType",function(t,r){if(i(t))return;if(G.equals(t,r))return;F(t,a,n)},!1),a.$on("$destroy",function(){O(a)}),a.$on("$resize",function(){a.chart&&a.chart.resize()})}}};function F(t,r,e){var a,n,o=(a=t,n=r,G.extend({},$.getOptions(a),n.chartOptions));if((c=r).chartData&&c.chartData.length&&function(t,r,e,a){if(a.responsive&&0===e[0].clientHeight)return k(function(){F(t,r,e)},50,!1),!1;return!0}(t,r,e,o)){var c,i,u=e[0],l=u.getContext("2d");r.chartGetColor="function"==typeof(i=r).chartGetColor?i.chartGetColor:E;var h,s,f,d,g,p,v,C,y,b,m,w,D,A,B=(v=function(t,r){var e=G.copy(r.chartColors||$.getOptions(t).chartColors||H.defaults.global.colors),a=e.length<r.chartData.length;for(;e.length<r.chartData.length;)e.push(r.chartGetColor());a&&(r.chartColors=e);return e.map(J)}(t,p=r),Array.isArray(p.chartData[0])?(C=p.chartLabels,y=p.chartData,b=p.chartSeries||[],m=v,w=p.chartDatasetOverride,{labels:C,datasets:y.map(function(t,r){var e=G.extend({},m[r],{label:b[r],data:t});return w&&w.length>=r&&G.merge(e,w[r]),e})}):(h=p.chartLabels,s=p.chartData,f=v,d=p.chartDatasetOverride,g={labels:h,datasets:[{data:s,backgroundColor:f.map(function(t){return t.pointBackgroundColor}),hoverBackgroundColor:f.map(function(t){return t.backgroundColor})}]},d&&G.merge(g.datasets[0],d),g));O(r),r.chart=new $.Chart(l,{type:t,data:B,options:o}),r.$emit("chart-create",r.chart),A=r,(D=u).onclick=A.chartClick?j(A,"chartClick",!1):G.noop,D.onmousemove=A.chartHover?j(A,"chartHover",!0):G.noop}}function c(t,r){return t+r}function j(o,c,i){var u={point:void 0,points:void 0};return function(t){var r=o.chart.getElementAtEvent||o.chart.getPointAtEvent,e=o.chart.getElementsAtEvent||o.chart.getPointsAtEvent;if(e){var a=e.call(o.chart,t),n=r?r.call(o.chart,t)[0]:void 0;!1!==i&&(G.equals(u.points,a)||G.equals(u.point,n))||(u.point=n,u.points=a,o[c](a,t,n))}}}function J(t){return"string"==typeof t&&"r"===t[0]?a(function(t){var r=t.match(/^rgba?\(([\d,.]+)\)$/);if(!r)throw new Error("Cannot parse rgb value");return(t=r[1].split(",")).map(Number)}(t)):"string"==typeof t&&"#"===t[0]?a((r=t.substr(1),[(e=parseInt(r,16))>>16&255,e>>8&255,255&e])):"object"==typeof t&&null!==t?t:E();var r,e}function E(){var t=[r(0,255),r(0,255),r(0,255)];return a(t)}function a(t){var r=t[3]||1;return{backgroundColor:e(t=t.slice(0,3),.2),pointBackgroundColor:e(t,r),pointHoverBackgroundColor:e(t,.8),borderColor:e(t,r),pointBorderColor:"#fff",pointHoverBorderColor:e(t,r)}}function r(t,r){return Math.floor(Math.random()*(r-t+1))+t}function e(t,r){return u?"rgb("+t.join(",")+")":"rgba("+t.concat(r).join(",")+")"}function i(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}function O(t){t.chart&&(t.chart.destroy(),t.$emit("chart-destroy",t.chart))}}]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(t){return new t("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("polarArea")}]).directive("chartBubble",["ChartJsFactory",function(t){return new t("bubble")}]).name});